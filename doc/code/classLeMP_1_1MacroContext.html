<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>Loyc: LeMP.MacroContext Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Loyc
   </div>
   <div id="projectbrief">Language of your choice: library documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Events</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceLeMP.html">LeMP</a></li><li class="navelem"><a class="el" href="classLeMP_1_1MacroContext.html">MacroContext</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classLeMP_1_1MacroContext-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">LeMP.MacroContext Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Standard extension methods for <a class="el" href="interfaceLeMP_1_1IMacroContext.html" title="This interface provides services offered by the lexical macro processor (LeMP).">IMacroContext</a>. 
 <a href="classLeMP_1_1MacroContext.html#details">More...</a></p>
<hr/>Source file:<ul>
<li><a href='https://github.com/qwertie/Loyc/tree/master/Core/Loyc.Syntax/LeMP/IMacroContext.cs'>/Core/Loyc.Syntax/LeMP/IMacroContext.cs</a></li>
</ul>
<a name="details" id="details"></a><h2 class="groupheader">Remarks</h2>
<div class="textblock"><p>Standard extension methods for <a class="el" href="interfaceLeMP_1_1IMacroContext.html" title="This interface provides services offered by the lexical macro processor (LeMP).">IMacroContext</a>.</p>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a97a3d3efd3a36f28d05a5a58ea6c804d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a97a3d3efd3a36f28d05a5a58ea6c804d"></a>
static <a class="el" href="classLoyc_1_1Syntax_1_1LNode.html">LNode</a>&#160;</td><td class="memItemRight" valign="bottom"><b>CurrentNode</b> (this <a class="el" href="interfaceLeMP_1_1IMacroContext.html">IMacroContext</a> ctx)</td></tr>
<tr class="separator:a97a3d3efd3a36f28d05a5a58ea6c804d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a645c9e0b5a4d7f7fccf6885147fcb307"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classLoyc_1_1Pair.html">Pair</a>&lt; VList&lt; <a class="el" href="classLoyc_1_1Syntax_1_1LNode.html">LNode</a> &gt;<br class="typebreak" />
, VList&lt; <a class="el" href="classLoyc_1_1Syntax_1_1LNode.html">LNode</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLeMP_1_1MacroContext.html#a645c9e0b5a4d7f7fccf6885147fcb307">GetArgsAndBody</a> (this <a class="el" href="interfaceLeMP_1_1IMacroContext.html">IMacroContext</a> ctx, bool orRemainingNodes)</td></tr>
<tr class="memdesc:a645c9e0b5a4d7f7fccf6885147fcb307"><td class="mdescLeft">&#160;</td><td class="mdescRight">Splits the current node into a pair of "argument" and "body" lists, potentially treating ctx.RemainingNodes as the "body" list. <a href="#a645c9e0b5a4d7f7fccf6885147fcb307">More...</a><br /></td></tr>
<tr class="separator:a645c9e0b5a4d7f7fccf6885147fcb307"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1536a9346e03f3adc67d822deaf99ace"><td class="memItemLeft" align="right" valign="top">static IEnumerable<br class="typebreak" />
&lt; KeyValuePair&lt; <a class="el" href="classLoyc_1_1Symbol.html">Symbol</a>, <a class="el" href="classLoyc_1_1Syntax_1_1LNode.html">LNode</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLeMP_1_1MacroContext.html#a1536a9346e03f3adc67d822deaf99ace">GetOptions</a> (VList&lt; <a class="el" href="classLoyc_1_1Syntax_1_1LNode.html">LNode</a> &gt; optionList)</td></tr>
<tr class="memdesc:a1536a9346e03f3adc67d822deaf99ace"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transforms an option list in the format <code>option1(v1), option2(v2)</code> or <code>option1: v1, option2: v2</code> into a sequence of (key, value) pairs. If the format of a given node is invalid, this function yields <code>(null, node)</code>. <a href="#a1536a9346e03f3adc67d822deaf99ace">More...</a><br /></td></tr>
<tr class="separator:a1536a9346e03f3adc67d822deaf99ace"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a645c9e0b5a4d7f7fccf6885147fcb307"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classLoyc_1_1Pair.html">Pair</a>&lt;VList&lt;<a class="el" href="classLoyc_1_1Syntax_1_1LNode.html">LNode</a>&gt;, VList&lt;<a class="el" href="classLoyc_1_1Syntax_1_1LNode.html">LNode</a>&gt; &gt; LeMP.MacroContext.GetArgsAndBody </td>
          <td>(</td>
          <td class="paramtype">this <a class="el" href="interfaceLeMP_1_1IMacroContext.html">IMacroContext</a>&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>orRemainingNodes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Splits the current node into a pair of "argument" and "body" lists, potentially treating ctx.RemainingNodes as the "body" list.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>Context of the current macro.</td></tr>
    <tr><td class="paramname">orRemainingNodes</td><td>Whether to use ctx.RemainingNodes as the second list if there is no {braces node} at the end of ctx.CurrentNode().Args.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pair where the first item is "arguments" and the second is the "body". If no body was detected then the second list is empty and the first list is simply ctx.CurrentNode().Args.</dd></dl>
<p>EC# supports a syntax specially designed for macro calls: </p><div class="fragment"><div class="line">macroName(args) { stmts; }</div>
</div><!-- fragment --><p> This is stored as a call node with a body, in braces, as its final parameter, i.e. it is equivalent to </p><div class="fragment"><div class="line">macroName(args, { stmts; });</div>
</div><!-- fragment --><p> A similar, but more general feature called "superexpressions" exists in LES. </p>
<p>Some macros would additionally like to apply themselves to all remaining nodes in the current list of statements or expressions, i.e. </p><div class="fragment"><div class="line">macroName(args); stmts;</div>
</div><!-- fragment --><p> <a class="el" href="namespaceLeMP.html" title="The lexical macro processor. Main classes: LeMP.Compiler and LeMP.MacroProcessor.">LeMP</a> supports this through the <a class="el" href="interfaceLeMP_1_1IMacroContext.html#ada43164412ec526c6e8d081cbb43b5c1" title="Gets or sets a value that indicates whether to drop all remaining node after the current one when the...">IMacroContext.DropRemainingNodes</a> and <a class="el" href="interfaceLeMP_1_1IMacroContext.html#a68425589ee09ef9f92085782abf8b53b" title="Gets a list of the remaining nodes (arguments/statements or attributes) after this point in the code ...">IMacroContext.RemainingNodes</a> APIs. If your macro wants to apply itself to all remaining statements or expressions in the current sequence of nodes, it can set the DropRemainingNodes property to true and then simply incorporate RemainingNodes into its own output (if you need to return multiple statements from your macro, use <code>list.AsLNode(CodeSymbols.Splice)</code> to convert a VList{LNode} to an LNode.) </p>
<p>This extension method helps you by detecting whether the current node has a body in braces or not. If the braces are present, the returned pair consists of the args shortened by one (i.e. <code>ctx.CurrentNode().Args.WithoutLast(1)</code>) and the Args of the "{}" braces node. Otherwise, <code>ctx.CurrentNode().Args</code> is the first item in the pair. </p>
<p>In the latter case, if <code>orRemainingNodes</code> then this method sets <code>ctx.DropRemainingNodes</code> to true and uses <code>ctx.RemainingNodes</code> as the second list. Otherwise the second list is left blank. </p>

</div>
</div>
<a class="anchor" id="a1536a9346e03f3adc67d822deaf99ace"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static IEnumerable&lt;KeyValuePair&lt;<a class="el" href="classLoyc_1_1Symbol.html">Symbol</a>, <a class="el" href="classLoyc_1_1Syntax_1_1LNode.html">LNode</a>&gt; &gt; LeMP.MacroContext.GetOptions </td>
          <td>(</td>
          <td class="paramtype">VList&lt; <a class="el" href="classLoyc_1_1Syntax_1_1LNode.html">LNode</a> &gt;&#160;</td>
          <td class="paramname"><em>optionList</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Transforms an option list in the format <code>option1(v1), option2(v2)</code> or <code>option1: v1, option2: v2</code> into a sequence of (key, value) pairs. If the format of a given node is invalid, this function yields <code>(null, node)</code>.</p>
<p><code>option1: v1, option2: v2</code> is parsed into <code>#namedArg(option1, v1), #namedArg(option2, v2)</code> in EC# or <code>@:(option1, v1), @:(option2, v2)</code> in LES. This function recognizes both forms. </p>

<p>References <a class="el" href="classLoyc_1_1Syntax_1_1CodeSymbols.html#aba9eeedc26cc952131b6955797efd7e2">Loyc.Syntax.CodeSymbols.NamedArg</a>.</p>

<p>Referenced by <a class="el" href="classLoyc_1_1LLPG_1_1Macros.html#a248cff146c92539da7786af63445bc02">Loyc.LLPG.Macros.LLLPG_lexer()</a>, and <a class="el" href="classLoyc_1_1LLPG_1_1Macros.html#ae102955f76c97cf0f27303b6d616e43d">Loyc.LLPG.Macros.LLLPG_parser()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.7-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Mar 2 2016 14:55:46 for Loyc by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</body>
</html>
